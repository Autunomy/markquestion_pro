### 项目简介

本项目主要的作用就是帮助自己记录自己的刷题过程，并且设计一个比赛日程安排，方便自己查看算法比赛的时间

### 技术栈

springboot2.6.5+nginx+mybatis+redis+thymeleaf+html+css+js+jquery+ajax+mysql8+SemanticUI+Vue+sprintSecurity+定时邮件发送+markdown解析+markdown语法解析高亮

### 基本功能

1.首页

中间展示最近做过的题的题解，不显示缩略信息，只显示题解的题目一，标签，日期，

页面的右边的第一个小的栏目，用来显示最近需要参加的比赛,第二个小栏目用来显示最近需要做的事情，需要由字数限制

导航栏在整个页面的最左边

页面的最上方需要留出来一个导航栏的宽度的东西用来显示当前页面的名称，最左边显示项目名称

---

2.题解详情页面

通过首页题解的链接进行跳转到当前页面，整个页面由原题链接，题解部分和代码部分组成，代码块下面显示此问题的标签，整个页面的底部有一个评论区，需要登陆之后才能进行评论

---

3.题解添加页面

可以在此页面添加题解信息，但是仅限管理员添加，普通用户不能添加，表单域分为题目、标签、题解、代码

---

4.登陆/注册页面

目前暂时不准备开通此功能

---

5.比赛信息添加页

每当报名了比赛之后，需要将比赛信息进行添加，表单域为下拉菜单(leetcode，newcoder，codeforces)、比赛名称、开始时间、结束时间、单选框(是否计入rank分数)

---

6.待做信息添加页

每当有一些事情需要做的时候，就可以在当前页面进行添加，用来提醒，表单域为时间，待做信息

---

7.题库页面

这个页面需要将所有的题解信息分页显示出来，最上面有一个搜索框，还有按不同种类型进行排序的下拉菜单

这个页面除了点击题解之外的其他信息都需要使用异步请求来发送，例如搜索，排序等等

### 日志

> 2022-6-08

目前构想，加入一个视频的播放页面，将自己的一些比较有用的视频上传到服务器上

1.所有视频展示页面

使用网格的方式展示所有的视频，每个视频底下需要配上文字描述(视频题目)

2.视频上传页面

需要有题目，描述，视频文件

3.视频管理页面

将所有视频的题目之类的信息按照表格的形式列出来，可以对视频进行删除

> 2022-6-9

由于有博主信息页面，所以应该添加一个页面专门用来编辑博主信息的页面

> 2022-6-10

在首页中，不显示标签信息，来源这个部分应该是一个a标签，可以直接指向该题目的原题链接，例如，来自于leetcode的题目，点击这个链接之后就会直接跳转到这个题目的leetcode页面，那么我们就需要在后台添加题目信息的时候，表单信息中加上来源(下拉菜单)以及原题链接(不能为null)

> 2022-6-13

video这个操作应该只在后台使用，其他人不希望使用video功能

后台的首页是一个日志的页面，记录一下网站的变化和发展

比赛日程表是借助第三方的css样式完成的

目前是是管理页面的编写

> 2022-06-14

基本完成了前端页面的编写，下一步应该是设计数据库

> 2022-06-15

偶然发现前端页面还有更新的页面并没有完成编写，由于更新的页面和添加页面基本一致，所以只用了一会就完成了编写。我还为题解详情展示页面添加了评论的功能

下来准备给管理员页面添加评论管理的功能，不需要给导航栏单独添加，只需要在管理员操作页面中的题解详情展示中， 展示出来评论，并且提供管理的按钮

> 2022-06-16

完成了前端页面的基本编写，后端集成了mybatis-plus完成了entity和mapper的编写，以及加入了swagger的文档注释

建立了所有的controller,下次就可以开始编写controller了

> 2022-06-19

后端页面编写到一半之后发现，比赛日程表这个页面并对于thymeleaf模板来说并不好实现，所以需要重新修改一下前端的样式

> 2022-06-20

将比赛日程表页面进行了修改，目前后端的前台页面编写完毕

问题：关于springboot如何保存文件到项目目录下的images/head目录下

> 2022-06-21

完成了除了视频以外的其他页面的后端编写

配置了springsecurity

bug:

- 在服务器上发布了自己的项目，目前的bug就在于服务器访问博主信息页面的时候会出错，原因是没有实现给数据库插入数据导致了空指针异常但是进入页面之后，仍然是**不显示头像**
- 网站访问非常慢，初步判断是因为使用了semanticUi导致的，我们需要使用本地的ui的css这样就会让速度提升
- 检查每一个网页的标题，目前发现了友链管理页面的标题正确
- 线上的友链修改不可用，修改后报400错误
- 虽然使用了mybatis-plus但是mybatis-plus的删除和时间的功能没有实现自动化，还是需要自己写代码进行实现
- 题解修改页面无法使用

需求：

- 完成首页的搜索的功能，按照题目来源和标签来筛选题目(使用ajax异步刷新实现)
- 在比赛日程页面中，使用js让未开始的比赛底色置为绿色，已经开始的比赛(过期的比赛)底色置为红色
- 若比赛即将开始，那么就自动发送邮件，提醒比赛
- 记录当前网站的访问人数以及访问量
- 记录每到题目的观看量
- 完成video功能的编写
- 评论部分的功能
- 给网站添加网站图标

> 2022-06-22

已解决bug：

- 线上的友链修改功能已可用
- 使用了本地的js和css，加载速度变快
- 头像的显示正常(对springsecurity的配置进行了修改， 让其不拦截静态资源，并且在yml中配置了静态资源的位置)
- 更正了所有网页的标题
- 可以进行题解修改

新增功能：

- 替换了原来的semanticUI的字体图标，改为了阿里巴巴的字体图标库，并且使用的是本地的库，不会存在速度的问题
- 添加了网站的图标
- 后台log信息可以解析html标签了
- 可以使用题目来源和标签两个下拉菜单分别进行选择，但是不能联动
- 可以使用搜索框进行模糊查询
- 在表格的上面显示了当前显示出来的题解数量
- 比赛日程页面实现表格变色
- 首页的比赛日程表可以进行点击直接跳转
- 比赛日程界面按照日期由近到远进行排序，未开始的排在前面
- 可以统计每个题解的观看量

新需求：

- 自己编写登陆页面
- 可以修改自己的头像
- 对题解页面进行分页操作
- 对比赛日程页面添加异步请求按钮，一个是显示未开始比赛，一个是显示已过期比赛
- 评论部分的功能
- 完成video功能的编写
- 在页面的底部添加上备案信息，网站建站日期，总的访问量

bug:

- 虽然使用了mybatis-plus但是mybatis-plus的删除和时间的功能没有实现自动化，还是需要自己写代码进行实现

> 2022-06-23

新增功能：

- 比赛日程页面添加异步请求按钮，一个是显示未开始比赛，一个是显示已过期比赛
- 在页面的底部添加上备案信息，网站建站日期，总的访问量
- 自定义登陆页面
- 比赛即将开始，那么就自动发送邮件，提醒比赛 发送邮件提醒是在比赛开始15分钟前

bug:

- 虽然使用了mybatis-plus但是mybatis-plus的删除和时间的功能没有实现自动化，还是需要自己写代码进行实现

> 2022-06-24

新增功能：

- 可以在日志中显示访问网站的用户的ip地址和访问时间 并在数据库中存储
- 集成腾讯的ip地址查询，可以在日志中显示ip地址所在的地理位置 并在数据库中存储

bug:

- 定时发送邮箱提醒任务，如果重启项目，那么就不会发送邮件，定时任务就会丢失---已解决

新需求：

- 编写一个后台页面，用于显示ip地址的记录信息 有刷新按钮，实现异步请求，有ip统计信息显示按钮，ip日志显示按钮

> 2022-06-25

新增功能：

- 集成marked.js可以解析markdown语法
- 使用highlight.js让代码块高亮
- 可以显示ip地址的记录信息 有刷新按钮，实现异步请求，有ip统计信息显示按钮，ip日志显示按钮
- 使用定时功能，每秒检查比赛日程是否过期，过期就对数据的字段进行设置
- 使用springboot的定时功能，实现每秒检测比赛日程表中需要邮箱提示的比赛，并且发送邮件进行提示(需要给数据库的比赛表添加一个字段默认值为0表示不需要发送邮件，1表示需要发送邮件)  定时就不会丢失了
- 将导航栏抽取出来，使用thymeleaf的静态导入进行导入，并且使用js给每个页面的导航的a标签的class加入active选中状态

新需求：

- 管理员登陆的时候需要使用邮箱进行验证

> 2022-06-25

bug：

- 头像上传功能，在本次没有问题，但是在服务器上无法使用
- 配置了WebMvcConfigurationSupport之后ajax请求会出现乱码问题

> 2022-06-28

在本地搭建了一台服务器，用于做linux上的测试，以便于进行测试

解决bug：

- 在服务器上可以正常的上传头像，其中的配置为 在yml中配置一下静态资源的路径

    ```yml
    web:
    	resources:
    		#这个配置相当于是把/markquestion配置称为了/ 只要在后面加上资源路径可以进行访问
    		static-locations: file:/markquestion,classpath:/static
    ```

    在文件保存的controller中应该这么写

    ```java
    if(!headImg.isEmpty()){
        //判断文件是否有后缀
        String name = headImg.getOriginalFilename();
        if(name != null && !name.contains(".")){//文件名中没有后缀
            model.addAttribute("msg","文件格式不正确");
        }else{
            //获取文件后缀
            String last = "";
            for(int i=name.length()-1;i>=0;--i){
                if(name.charAt(i) == '.') break;
                last = name.charAt(i)+""+last;
            }
    
            String fileName = "head."+last;
            //保存的时候要将全路径写出来
            headImg.transferTo(new File("/markquestion/images/head/"+fileName));
            //对数据库中的头像信息更新一下 写的就是相对路径
            authorMessage.setHeadImg("/images/head/"+fileName);
        }
    }
    ```

    在上传服务器之后仍然无法修改，出现的问题就是权限不足，我是将资源文件放在了根目录的位置，所以才会导致这个问题，解决方法

    1. 修改目录权限  `chown -R 777 目录名(文件名)`
    2. 将资源文件移动到一个有访问权限的目录中

新增功能:

- 由于需要实现分页功能，所以将搜索和标签筛选功能删除，以后技术成熟在添加该功能

新需求：

- 做一个学习推荐的页面，可以推荐各种学习视频(显示尽量为一行一个)
- 做一个博客页面
- 做一个小插件、小软件之类的推荐页面

> 2022-06-29

新增功能

- 题解页面对于h标签都进行了抽取，做成了一个目录
- 做了推荐页面

> 2022-06-30

新增功能

- 增加了推荐页面
- 增加了推荐详情页面

新需求：

- 后台的manage中也要能够管理推荐信息（CRUD）

> 2022-07-02

新需求：

- 将日志保存在文件中

> 2022-07-10

bug:

- 在本地完成了推荐信息的增删改查还有图片上传，但是在服务器会出现问题，就是在头像并不存在的时候，就会出现无法上传头像的问题

>2022-7-11

解决Bug:

- 解决了服务器上传推荐图片的问题，造成的原因是因为服务器上的advice文件夹的位置错误

新需求：

- 修改后台页面的布局，让导航栏是可以具有下拉菜单(实现方法可以使用css)
- 编写一个题目练习页面，板块中分为java练习题，mysql练习题。。。，这些练习题可以通过自己每天进行录入，也有一个通道可以供网站访问人员进行上传，上传之后需要审核，审核通过之后就会发送电子邮件通知用户自己题目已经被录用，并且在邮件中写入题号，所有人都可以使用网站的习题练习板块来练习习题，习题出题顺序是随机的，当所有题目做完之后公布正确答案，所有题目需要放在一个页面上
- 推荐页面的搜索功能

新增功能：

- 增加推荐页面，可以对一些比较有意思的东西进行推荐

bug：

- 推荐页面无法翻页（已解决）

> 2022-7-12

新增功能：

- 可以使用推荐页面的搜索功能了

> 2022-7-13

创建了练习题目表和练习的标签表，练习的平台来源是基于platform表

> 2022-7-14

完成了练习页面的初步编写，下来应该编写立即开始之后，答题页面以及解析页面

> 2022-7-17

- 完成了做题页面的所有按钮，接下来应该完成修改个人信息按钮
- 需要完成练习添加页面

> 2022-7-18

完成了练习的客户端的编写，现在该后台的编写

bug:

- 题解管理页面如果使用了搜索和利用标签选择题目之后，不显示操作部分的按钮，原因是因为这部分是ajax实现的，需要使用ajax添加上这部分的操作

> 2022-7-19

- 解决了题解管理页面如果使用了搜索和利用标签选择题目之后，不显示操作部分的按钮
- 如果题目是多选题，前端还没有编写相应的代码来进行过区别处理，后端也没有进行处理
- 后台管理页面的前端页面编写完成

> 2022-7-20

- 针对于多选题与单选题问题，我准备利用thymeleaf的if标签来进行切换
- 可以在后台查看题库信息
- 可以在后台创建题库
- 可以在后台创建题目信息

> 2022-7-21

- 可以对题库，题目信息进行增改查
- 可以对用户进行增删改查
- 可以进行所有的搜索功能
- 没有做单选与多选题的显示，现在只能正常显示单选题目
- 练习题目解析没有做markdown解析
- 练习题目没有做markdown解析
- 题目的字体太小
- 做题时前面有了题号
- 所有页面的标题都没有了

> 2022-7-22

- 将做题页面的题目字体大小放大
- 后台不会一直报空指针异常
- 给语言基础练习页面都添加了底部标识
- 练习题目可以使用markdown解析
- 题目解析可以使用markdown解析
- 所有页面的标题都没有了
- 没有做单选与多选题的显示，现在只能正常显示单选题目
- 推荐页面没有底部信息

> 2022-7- 24

- 推荐页面添加了底部信息
- 解决了所有页面没有标题的问题,但是没有图标了
- 可以做多选题目了
- 需要让后台可以根据题目的名称进行搜索题目
- 搜索出来的题目的表格没有题目信息
- 后台也需要能够查看题目信息

> 2022-08-02

- 推荐页面的浏览量并没有随着浏览增加（已解决）

> 2022-08-03

- 网站引入cdn访问速度加快

> 2022-08-05

- cdn引入之后导致某些页面数据更新不及时，所以暂时取消引入cdn
