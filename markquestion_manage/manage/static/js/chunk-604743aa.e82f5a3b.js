(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-604743aa"],{"2ac8":function(t,e,n){"use strict";var o=n("b775");e["a"]={queryQuestionPage:function(t){return Object(o["a"])({url:"/question/queryQuestionPage?"+t,method:"GET"})},getQuestionFrom:function(){return Object(o["a"])({url:"/question/getQuestionFrom",method:"GET"})},addQuestion:function(t){return Object(o["a"])({url:"/question/addQuestion",method:"POST",data:t})},queryQuestionById:function(t){return Object(o["a"])({url:"/question/queryQuestionById?qid="+t,method:"GET"})},updateQuestion:function(t){return Object(o["a"])({url:"/question/updateQuestion",method:"POST",data:t})},deleteQuestionById:function(t){return Object(o["a"])({url:"/question/deleteQuestionById?id="+t,method:"GET"})},searchQuestion:function(t){return Object(o["a"])({url:"/question/searchQuestion?"+t,method:"GET"})}}},ac43:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.contestList,border:""}},[n("el-table-column",{attrs:{fixed:"",prop:"id",label:"编号"}}),n("el-table-column",{attrs:{prop:"contestName",label:"比赛名称"}}),n("el-table-column",{attrs:{prop:"contestTime",label:"比赛日期"}}),n("el-table-column",{attrs:{prop:"platform",label:"平台"}}),n("el-table-column",{attrs:{prop:"link",label:"地址链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticStyle:{color:"#409EFF"},attrs:{href:e.row.link}},[t._v(t._s(e.row.link))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.showUpdateContest(e.row)}}},[t._v("编辑")]),n("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(n){return t.deleteContest(e.row.id)}}},[t._v("删除")])]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"center","margin-top":"20px","margin-bottom":"50px"},attrs:{background:"",layout:"prev, pager, next","current-page":t.pageInfo.currentPage,"page-size":t.pageInfo.pageSize,total:t.pageInfo.total},on:{"current-change":t.handleCurrentPage}}),n("el-dialog",{attrs:{title:"修改比赛",visible:t.isShow,top:"20px"},on:{"update:visible":function(e){t.isShow=e}}},[n("el-form",{attrs:{model:t.contest}},[n("el-form-item",{attrs:{label:"比赛平台"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.contest.platform,callback:function(e){t.$set(t.contest,"platform",e)},expression:"contest.platform"}},t._l(t.platformList,(function(t){return n("el-option",{key:t.platform,attrs:{label:t.platform,value:t.platform}})})),1)],1),n("el-form-item",{attrs:{label:"比赛链接"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.contest.link,callback:function(e){t.$set(t.contest,"link",e)},expression:"contest.link"}})],1),n("el-form-item",{attrs:{label:"比赛日期"}},[n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间"},model:{value:t.contest.contestTime,callback:function(e){t.$set(t.contest,"contestTime",e)},expression:"contest.contestTime"}})],1)]),n("el-form-item",{attrs:{label:"比赛名称"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.contest.contestName,callback:function(e){t.$set(t.contest,"contestName",e)},expression:"contest.contestName"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){this.isShow=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.updateContest}},[t._v("确 定")])],1)],1)],1)},a=[],s=(n("d3b7"),n("159b"),n("f634")),r=n("4328"),i=n.n(r),u=n("fb92"),c=n("2ac8"),l={name:"contestList",data:function(){return{contestList:[],pageInfo:{currentPage:1,pageSize:10,total:0},isShow:!1,contest:{},platformList:[]}},mounted:function(){this.queryContestPage()},methods:{queryContestPage:function(){var t=this;s["a"].queryContestPage(i.a.stringify(this.pageInfo)).then((function(e){t.contestList=e.data,t.contestList.forEach((function(t){t.contestTime=u["a"].dateFormat(new Date(t.contestTime))})),t.pageInfo=e.pageInfo}))},deleteContest:function(t){var e=this;this.$confirm("是否要删除当前比赛(删除将无法找回)?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){s["a"].deleteContestById(t).then((function(t){200===t.code?e.$message.success({message:"删除成功",duration:1e3}):e.$message.error({message:"删除失败",duration:1e3}),1===e.contestList.length&&e.pageInfo.currentPage>1&&e.pageInfo.currentPage--,e.queryContestPage()})).catch((function(t){e.$message.error({message:"网络出错啦"+t,duration:1e3})}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},showUpdateContest:function(t){var e=this;this.isShow=!0,this.contest=t,c["a"].getQuestionFrom().then((function(t){e.platformList=t.data}))},updateContest:function(){var t=this;s["a"].updateContest(i.a.stringify(this.contest)).then((function(e){200===e.code?(t.$message.success({message:"修改成功",duration:1500}),t.queryContestPage()):t.$message.error({message:"修改失败",duration:1500})})),this.isShow=!1},handleCurrentPage:function(t){this.pageInfo.currentPage=t,this.queryContestPage()}}},d=l,f=n("2877"),m=Object(f["a"])(d,o,a,!1,null,"3da4cb55",null);e["default"]=m.exports},f634:function(t,e,n){"use strict";var o=n("b775");e["a"]={queryContestPage:function(t){return Object(o["a"])({url:"/contest/queryContestPage",method:"POST",data:t})},deleteContestById:function(t){return Object(o["a"])({url:"/contest/deleteContestById?id="+t,method:"GET"})},addContest:function(t){return Object(o["a"])({url:"/contest/addContest",method:"POST",data:t})},updateContest:function(t){return Object(o["a"])({url:"/contest/updateContest",method:"POST",data:t})}}},fb92:function(t,e,n){"use strict";e["a"]={dateFormat:function(t){var e=t.getFullYear(),n=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,o=t.getDate()<10?"0"+t.getDate():t.getDate(),a=t.getHours()<10?"0"+t.getHours():t.getHours(),s=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),r=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds();return e+"-"+n+"-"+o+" "+a+":"+s+":"+r}}}}]);